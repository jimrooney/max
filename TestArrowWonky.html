<!DOCTYPE html>
<html>
<head>
  <style>
    /* Style for the arrow SVG */
    #container {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    #arrow {
      width: 100px;
      height: 100px;
      transform-origin: center;
      transform-box: fill-box;
      transform: rotate(0deg); /* Initial rotation set to 0 degrees (vertical) */
      pointer-events: none; /* Make sure the arrow doesn't interfere with mouse events */
      position: relative; /* Allow absolute positioning of the numbers */
    }

    /* Style for the angle display */
    .angle {
      position: absolute;
      font-size: 20px;
      transform: translate(-50%, -50%);
    }
  </style>
</head>
<body>
  <!-- Container for centering the arrow -->
  <div id="container">
    <!-- SVG arrow graphic -->
    <svg id="arrow" viewBox="0 0 100 100">
      <polygon points="50,0 0,60 20,60 50,35 80,60 100,60" fill="none" stroke="blue" stroke-width="3" />
      <line x1="50" y1="60" x2="50" y2="100" stroke="blue" stroke-width="3" />
    </svg>
  </div>

  <script>
    // Get the arrow SVG element
    const arrow = document.getElementById('arrow');

    // Function to update the arrow's rotation and angle
    function updateArrowRotation(event) {
      // Get the arrow's center coordinates
      const arrowRect = arrow.getBoundingClientRect();
      const arrowCenterX = arrowRect.left + arrowRect.width / 2;
      const arrowCenterY = arrowRect.top + arrowRect.height / 2;

      // Calculate the angle between the arrow center and the mouse position
      const angleRadians = Math.atan2(event.clientY - arrowCenterY, event.clientX - arrowCenterX);
      let angleDegrees = (angleRadians * 180) / Math.PI;

      // Adjust the angle to be between 0 and 359 degrees with 0 degrees representing vertical
      angleDegrees += 90; // Adjust for the initial arrow rotation
      if (angleDegrees < 0) {
        angleDegrees += 360;
      }

      // Calculate the angle as an integer from 0 to 359
      const angle = Math.round(angleDegrees);

      // Rotate the arrow to point in the calculated direction
      arrow.style.transform = `rotate(${angle}deg)`;

      // Update the angle display
      updateAngleDisplays(angle, event.clientX, event.clientY);
    }

    // Function to update the position of angle displays
    function updateAngleDisplays(angle, mouseX, mouseY) {
      const numDisplays = document.querySelectorAll('.angle');

      numDisplays.forEach((display, index) => {
        const angleOffset = (index * 45) % 360; // Distribute angles around the arrow
        const displayAngle = (angle + angleOffset) % 360;

        // Calculate display position
        const radius = 50; // Distance from arrow center
        const displayX = mouseX + radius * Math.cos((displayAngle - 90) * (Math.PI / 180));
        const displayY = mouseY + radius * Math.sin((displayAngle - 90) * (Math.PI / 180));

        // Update the display position
        display.style.left = `${displayX}px`;
        display.style.top = `${displayY}px`;
        display.textContent = displayAngle;
      });
    }

    // Add a mousemove event listener to the document
    document.addEventListener('mousemove', updateArrowRotation);

    // Initial setup for angle displays
    const angleDisplayContainer = document.getElementById('container');
    for (let i = 0; i < 8; i++) {
      const angleDisplay = document.createElement('div');
      angleDisplay.classList.add('angle');
      angleDisplayContainer.appendChild(angleDisplay);
    }
  </script>
</body>
</html>

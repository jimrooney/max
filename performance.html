<meta name="viewport" content="width=device-width, user-scalable=no" />
<link rel="stylesheet" href="test.css" />
<link rel="stylesheet" href="CSS.css" />
<link rel="stylesheet" href="drag.css" />

<script src="JimQuery.js"></script>
<script src="navbar.js"></script>

<script src="data.js"></script>
<script src="Airplanes.js"></script>
<script src="Display.js"></script>
<script src="Calculator.js"></script>
<script src="Performance.js"></script>
<script src="UI.js"></script>
<script src="root.js"></script>

<script>
  const calc = new Calculator()

  $().ready(() => {
    root.parameters = {
      data: root.data.C185.takeoff,
      weight: document.querySelector("#weight").value, //|| 2400,
      wind: document.querySelector("#headwind").value || 0,
      altitude: document.querySelector("#altitude").value || 0,
    }
  })

  function doClick() {
    console.log("doClick")
    root.performance.doPerformance()
    //     const parameters = {
    //       data: root.data.C185.takeoff,
    //       weight: document.querySelector("#weight").value, //|| 2400,
    //       wind: document.querySelector("#headwind").value || 0,
    //       altitude: document.querySelector("#altitude").value || 0,
    //     }
    //     const result = root.performance.byWeight(parameters)
    //     const out = `Speed: ${Math.round(result.speed)}
    // \nGround Run: ${Math.round(result.groundRun)}
    // \nTO Distance: ${Math.round(result.TODistance)}`

    //     document.getElementById("output").value = out
  }
</script>
<head>
  <!-- PWA Stuff -->
  <link rel="canonical" href="https://balance.jimrooney.com/" />
  <link rel="manifest" href="manifest.json" />
</head>
<body>
  <div id="draggableContainer">
    <div id="navbar"></div>

    <!-- Sliders -->
    <div style="position: relative; left: 50%; top: 75%; transform: translate(-50%, -50%)">
      <!-- Altitude Slider -->
      <div id="AltitudeSliderBar" style="position: absolute; right: 10%; width: 10px; height: 200px; background-color: rgb(0, 13, 255)">
        <div style="position: absolute; z-index: 1; top: 20px; right: 0px">
          <div
            class="draggable boxarrow justifyRight"
            constraint="y"
            control="altitude"
            bar="AltitudeSliderBar"
            style="right: -10px; transform: rotate(0deg); position: relative"
          >
            <div style="position: absolute; bottom: 0; z-index: -2">
              <label for="altitude" style="margin-top: -100px; z-index: -1; position: absolute">Altitude:</label>
              <input
                type="text"
                id="altitude"
                value="0"
                onkeydown="if (event.keyCode == 13) root.performance.doPerformance()"
                oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                style="width: 50px; height: 20px; margin-top: -80px; z-index: -1; position: absolute"
              />
            </div>
          </div>
        </div>
      </div>
      <!-- Weight Slider -->
      <div id="WeightSliderBar" style="position: absolute; right: 40%; width: 10px; height: 200px; background-color: rgb(0, 255, 34)">
        <div style="position: absolute; z-index: 1; top: 20px; right: 0px">
          <div
            class="draggable boxarrow justifyRight"
            constraint="y"
            control="weight"
            bar="WeightSliderBar"
            style="right: -10px; transform: rotate(0deg); position: relative"
          >
            <div style="position: absolute; bottom: 0; z-index: -2">
              <label for="weight" style="margin-top: -100px; z-index: -1; position: absolute">Weight:</label>
              <input
                type="text"
                id="weight"
                value="2300"
                onkeydown="if (event.keyCode == 13) root.performance.doPerformance()"
                oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                style="width: 50px; height: 20px; margin-top: -80px; z-index: -1; position: absolute"
              />
            </div>
          </div>
        </div>
      </div>
      <!-- Temperature Slider -->
      <div id="TempSliderBar" style="position: absolute; right: 73%; width: 10px; height: 200px; background-color: rgb(255, 251, 0)">
        <div style="position: absolute; z-index: 1; top: 20px; right: 0px">
          <div
            class="draggable boxarrow justifyRight"
            constraint="y"
            control="temp"
            bar="TempSliderBar"
            style="right: -10px; transform: rotate(0deg); position: relative"
          >
            <div style="position: absolute; bottom: 0">
              <label for="temp" style="margin-top: -100px; z-index: -1; position: absolute">Temperature:</label>
              <input
                type="text"
                id="temp"
                value="0"
                onkeydown="if (event.keyCode == 13) root.performance.doPerformance()"
                oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                style="width: 50px; height: 20px; margin-top: -80px; z-index: -1; position: absolute"
              />
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- /Sliders -->

    <!-- Headwind Slider -->
    <div
      class="headwind"
      id="HeadwindSliderBar"
      style="position: absolute; top: 500px; left: 30%; width: 200px; height: 10px; background-color: rgb(255, 0, 0)"
    >
      <div class="draggable boxarrow" constraint="x" control="headwind" bar="HeadwindSliderBar">
        <div>
          <label for="headwind">Headwind:</label>
          <input
            type="text"
            id="headwind"
            value="0"
            onkeydown="if (event.keyCode == 13) root.performance.doPerformance()"
            oninput="this.value = this.value.replace(/[^0-9]/g, '')"
            style="margin-top: -40px"
          />
        </div>
      </div>
    </div>

    <!-- Airplane Icon -->
    <!-- <center><div id="airplane-icon" class="airplane-icon"></div></center> -->

    <!-- Buttons -->
    <div style="bottom: 0; position: absolute; z-index: 3; right: 0">
      <input type="button" id="doClick" value="Calc" onclick="root.performance.doPerformance()" />
      <p></p>
    </div>
    <!-- Output -->
    <div style="bottom: 0; position: absolute">
      <label for="output">Output:</label>
      <textarea id="output" name="output" rows="5" cols="50"></textarea>
    </div>

    <!-- QNH -->
    <!-- QNH Slider -->
    <!-- <div id="QNHSliderbBar" style="position: absolute; right: 45%; top: 45%; width: 10px; height: 100px; background-color: rgb(0, 200, 255)">
        <div style="position: absolute; z-index: 2; top: 60px; right: 10px">
          <div
            class="draggable boxarrow justifyRight"
            constraint="y"
            control="QNH"
            bar="QNHSliderbBar"
            style="right: -10px; transform: rotate(0deg); position: relative"
          >
            <div style="position: absolute; bottom: 0; z-index: -2">
              <label for="weight" style="margin-top: -100px; z-index: -1; position: absolute">QNH:</label>
              <input
                type="text"
                id="QNH"
                value="1013"
                onkeydown="if (event.keyCode == 13) root.performance.doPerformance()"
                oninput="this.value = this.value.replace(/[^0-9]/g, '')"
                style="width: 50px; height: 20px; margin-top: -80px; z-index: -1; position: absolute"
              />
            </div>
          </div>
        </div>
      </div> -->

    <!-- Grass Runway Option -->
    <label><input type="checkbox" id="grass_runway" value="grass" onclick="root.performance.doPerformance()" checked />Grass Runway</label>
  </div>
</body>

<script type="text/javascript">
  $().ready(() => {
    console.log("div ", $("#follow-div"))
    root.ui.setDraggable($("#follow-div"))

    $("#follow-div").on("mousedown", function () {
      root.ui.setActiveDiv(this)
    })

    const calcButtons = document.querySelectorAll(".MyButtons.CalculateDistance")
    // Loop through all matching elements and add a click event listener to each
    calcButtons.forEach(function (calcButton) {
      calcButton.on("click", function (event) {
        // Prevent the default behavior of the anchor (e.g., navigating to a new page)
        event.preventDefault()
        alert(root.performance.get50ftDistance(root.data.test, 43))
      })
    })
  })
</script>
<script src="drag.js"></script>

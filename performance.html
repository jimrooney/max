<meta name="viewport" content="width=device-width, user-scalable=no" />
<link rel="stylesheet" href="test.css" />
<link rel="stylesheet" href="CSS.css" />
<link rel="stylesheet" href="drag.css" />

<script src="JimQuery.js"></script>
<script src="navbar.js"></script>

<script src="data.js"></script>
<script src="Airplanes.js"></script>
<script src="Display.js"></script>
<script src="Calculator.js"></script>
<script src="Performance.js"></script>
<script src="UI.js"></script>
<script src="root.js"></script>

<script>
  const clickButton = function () {
    alert("button")
  }
  const calc = new Calculator()
  function doClick() {
    let output = JSON.stringify(root.data.C185.takeoff)
    document.getElementById("output").value = output
    const parameters = {
      data: root.data.C185.takeoff,
      weight: document.querySelector("#weight").value, //|| 2400,
      wind: document.querySelector("#headwind").value || 0,
      altitude: document.querySelector("#altitude").value || 0,
    }
    const data = root.performance.byWeight(parameters)

    const out = `Speed: ${Math.round(data.speed)}
    \nGround Run: ${Math.round(data.groundRun)}
    \nTO Distance: ${Math.round(data.TODistance)}`

    document.getElementById("output").value = out
    //    document.querySelector("#output").value = "out"
  }
</script>
<head>
  <!-- PWA Stuff -->
  <link rel="canonical" href="https://balance.jimrooney.com/" />
  <link rel="manifest" href="manifest.json" />
</head>
<body>
  <div id="draggableContainer">
    <div id="navbar"></div>

    <!-- Altitude Slider -->
    <div
      class="draggable boxarrow justifyRight"
      constraint="y"
      control="altitude"
      style="right: 30px; transform: rotate(0deg)"
    >
      <div>
        <label for="altitude">Altitude:</label>
        <input
          type="text"
          id="altitude"
          value="Zero"
          onkeydown="if (event.keyCode == 13) document.querySelector('#byWeight').click()"
          oninput="this.value = this.value.replace(/[^0-9]/g, '')"
          style="margin-top: -40px"
        />
      </div>
    </div>

        <!-- Weight Slider -->
        <div
        class="draggable boxarrow justifyRight"
        constraint="y"
        control="weight"
        style="right: 250px; transform: rotate(0deg)"
      >
        <div>
          <label for="weight">Weight:</label>
          <input
            type="text"
            id="weight"
            value="2300"
            onkeydown="if (event.keyCode == 13) document.querySelector('#byWeight').click()"
            oninput="this.value = this.value.replace(/[^0-9]/g, '')"
            style="margin-top: -40px"
          />
        </div>
      </div>

    <!-- <div>
      <label for="weight">Weight:</label>
      <input
        type="text"
        id="weight"
        onkeydown="if (event.keyCode == 13) document.querySelector('#byWeight').click()"
        oninput="this.value = this.value.replace(/[^0-9]/g, '')"
      />
    </div> -->
    <div>
      <label for="headwind">Headwind:</label>
      <input
        type="text"
        id="headwind"
        value="0"
        oninput="this.value = this.value.replace(/[^0-9]/g, '')"
      />
    </div>
    <div>
      <br />
      <label for="output">Output:</label>
      <textarea id="output" name="output" rows="5" cols="50"></textarea>
    </div>

    <center><div id="airplane-icon" class="airplane-icon"></div></center>
    <input type="button" id="doClick" value="doClick" onclick="doClick()" />
    <input
      type="button"
      id="byWeight"
      value="By Weight"
      onclick="root.performance.byWeight({
  data: root.data.C185.takeoff,
  weight: document.querySelector('#weight').value, //|| 2400,
  wind: document.querySelector('#headwind').value || 0,
  altitude: document.querySelector('#altitude').value || 0,
});"
    />
    <div class="draggable boxarrow" constraint="x">HELLO</div>
  </div>
</body>

<script type="text/javascript">
  $().ready(() => {
    console.log("div ", $("#follow-div"))
    root.ui.setDraggable($("#follow-div"))

    $("#follow-div").on("mousedown", function () {
      root.ui.setActiveDiv(this)
    })

    root.byWeight = function (weight) {
      const speed = root.performance.getTakeoffSpeed(root.data.test, weight)
      const groundRoll = root.performance.getGroundRoll(root.data.test, speed)
      const distance = root.performance.get50ftDistance(root.data.test, speed)
      alert(
        `Takeoff Speed: ${Math.round(speed)} kts \nGroundRoll: ${Math.round(
          groundRoll
        )} \nTakeoff Distance (50ft): ${Math.round(distance)}`
      )
    }
    const calcButtons = document.querySelectorAll(
      ".MyButtons.CalculateDistance"
    )
    // Loop through all matching elements and add a click event listener to each
    calcButtons.forEach(function (calcButton) {
      calcButton.on("click", function (event) {
        // Prevent the default behavior of the anchor (e.g., navigating to a new page)
        event.preventDefault()
        alert(root.performance.get50ftDistance(root.data.test, 43))
      })
    })
  })
</script>
<script src="drag.js"></script>

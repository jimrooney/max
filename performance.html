<link rel="stylesheet" href="test.css" />
<link rel="stylesheet" href="CSS.css" />

<script src="JimQuery.js"></script>
<script src="navbar.js"></script>

<script src="data.js"></script>
<script src="Airplanes.js"></script>
<script src="Display.js"></script>
<script src="Calculator.js"></script>
<script src="Performance.js"></script>
<script src="UI.js"></script>
<script src="root.js"></script>

<script>
  const clickButton = function () {
    alert("button")
  }
  const calc = new Calculator()
</script>
<head>
  <!-- PWA Stuff -->
  <link rel="canonical" href="https://balance.jimrooney.com/" />
  <link rel="manifest" href="manifest.json" />
</head>
<body>
  <div id="navbar"></div>
  <div id="follow-div">
    <div class="boxarrow"></div>
    <div><input type="text" value="Hello" /></div>
  </div>
  <div>
    <input
      type="text"
      id="weight"
      onkeydown="if (event.keyCode == 13) document.querySelector('#byWeight').click()"
      oninput="this.value = this.value.replace(/[^0-9]/g, '')"
    />
    <input
      type="button"
      id="byWeight"
      value="By Weight"
      onclick="root.performance.byWeight({
        data: root.data.C185.takeoff,
        weight: document.querySelector('#weight').value, //|| 2400,
        wind: document.querySelector('#headwind').value
      });"
    />
  </div>

  <input
  type="text"
  id="headwind"
  value="Wind"
  oninput="this.value = this.value.replace(/[^0-9]/g, '')"
/>
  <select name="myList" id="myList">
    <option value="Distance50">Distance50</option>
    <option value="TO Speed">TO Speed</option>
    <option value="Hello" onClick="calc.hello()">Hello</option>
  </select>
  <center><div id="airplane-icon" class="airplane-icon"></div></center>
</body>

<script type="text/javascript">
  $().ready(() => {
    console.log("div ", $("#follow-div"))
    root.ui.setDraggable($("#follow-div"))

    $("#follow-div").on("mousedown", function () {
      root.ui.setActiveDiv(this)
    })

    // process_touchend = () => {
    //   console.log("touchend")
    // }

    // dragArrow.forEach((arrow) => {
    // arrow.on("touchend", process_touchend, false)
    // Create touchend handler
    // arrow.on(
    //   "touchend",
    //   (ev) => {
    //     // Iterate through the touch points that ended
    //     for (let i = 0; i < ev.changedTouches.length; i++) {
    //       console.log("TouchEnd ", ev.changedTouches[i].target)
    //       console.log("Mouse: ", ev.clientX, ev.clientY)
    //     }
    //   },
    //   false
    // )

    // Create touchstart handler
    // arrow.on(
    //   "touchstart",
    //   (ev) => {
    //     // Iterate through the touch points that were activated
    //     // for this element and process each event 'target'
    //     for (let i = 0; i < ev.targetTouches.length; i++) {
    //       console.log("TouchStart ", ev.targetTouches[i].target)
    //     }
    //   },
    //   false
    // )
    // arrow.on("mousedown", (event) => {
    //   console.log("Click Down ", event.clientX, event.clientY)
    // })
    // arrow.on("mouseup", (event) => {
    //   console.log("Mouse Up", event.clientX, event.clientY)
    // })
    // })

    root.byWeight = function (weight) {
      const speed = root.performance.getTakeoffSpeed(root.data.test, weight)
      const groundRoll = root.performance.getGroundRoll(root.data.test, speed)
      const distance = root.performance.get50ftDistance(root.data.test, speed)
      alert(
        `Takeoff Speed: ${Math.round(speed)} kts \nGroundRoll: ${Math.round(
          groundRoll
        )} \nTakeoff Distance (50ft): ${Math.round(distance)}`
      )
    }
    const calcButtons = document.querySelectorAll(
      ".MyButtons.CalculateDistance"
    )
    // Loop through all matching elements and add a click event listener to each
    calcButtons.forEach(function (calcButton) {
      calcButton.on("click", function (event) {
        // Prevent the default behavior of the anchor (e.g., navigating to a new page)
        event.preventDefault()
        alert(root.performance.get50ftDistance(root.data.test, 43))
      })
    })

    const dropdown = $("myList")
    const weight = $("weight")

    // Add a change event listener to the <select> element
    dropdown.on("change", function () {
      let selectedValue = dropdown.value

      // Check if the selected value is the one you want to trigger the function for
      if (selectedValue === "Distance50") {
        alert(root.performance.get50ftDistance(root.data.test, 43)) // data speed
        console.log(weight.value)
      }
      if (selectedValue === "TO Speed") {
        alert(root.performance.getTakeoffSpeed(root.data.test, 2400)) // data/weight
      }
    })
  })
</script>
